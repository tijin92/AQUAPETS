<%- include('../layouts/admin_header.ejs') %>

<% const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"]; %>
<!-- top and side nav starts -->

    <div class="container-xxl position-relative bg-white d-flex p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3">
            <nav class="navbar bg-light navbar-light">
                <a href="/admin/home" class="navbar-brand mx-4 mb-3">
                    <h3 class="text-primary">AQUApets.in</h3>
                </a>
            
                <div class="navbar-nav w-100">
                    <a href="/admin/home" class="nav-item nav-link active"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                    
                    <a href="/admin/salesReport" class="nav-item nav-link"><i class="fa fa-chart-bar me-2"></i>Sales Report</a>

                    <a href="/admin/orderList" class="nav-item nav-link"><i class="far fa-file-alt me-2"></i>Orders</a>

                    <a href="/admin/categoryList" class="nav-item nav-link"><i class="fas fa-list"></i>Category</a>

                    <a href="/admin/userList" class="nav-item nav-link"><i class="fas fa-users"></i>Users</a>

                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fas fa-boxes"></i>Products</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/admin/addProducts" class="dropdown-item">Add Products</a>
                            <a href="/admin/productList" class="dropdown-item">View & Update Products</a>
                            
                        </div>
                    </div>

                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-gift" aria-hidden="true"></i>Offer</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/admin/addOffer" class="dropdown-item">Add Offer</a>
                            <a href="/admin/viewOffer" class="dropdown-item">View & Update Offer</a>
                            
                        </div>
                    </div>

                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fas fa-list-alt"></i>Coupon</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/admin/addCoupon" class="dropdown-item">Add Coupon</a>
                            <a href="/admin/viewCoupon" class="dropdown-item">View & Update Coupon</a>
                            
                        </div>
                    </div>

                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>Banner</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/admin/addBanner" class="dropdown-item">Add Banner</a>
                            <a href="/admin/viewBanner" class="dropdown-item">View & Update Banner</a>
                            
                        </div>
                    </div>
                   
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-hashtag"></i></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars"></i>
                </a>

                <div class="navbar-nav align-items-center ms-auto">
                   
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="/img/user.jpg" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                            
                            <a href="/admin/logout" class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->

<!-- top and side nav ends -->


            <!-- Sale & Revenue Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-line fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Today Sale</p>
                                <h6 class="mb-0"><%= todaySales %></h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-bar fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Sale</p>
                                <h6 class="mb-0"><%= totalSales %></h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-area fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Today Revenue</p>
                                <h6 class="mb-0">₹<%= todayRevenue.toLocaleString() %></h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-pie fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Revenue</p>
                                <h6 class="mb-0">₹<%= totalRevenue.toLocaleString() %></h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sale & Revenue End -->


            <!-- Sales Chart Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Sales Chart</h6>
                                
                            </div>
                            <canvas id="monthly-sales"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Revenue Chart</h6>
                                
                            </div>
                            <canvas id="monthly-revenue"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sales Chart End -->


            <!-- Recent Sales Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="bg-light text-center rounded p-4">
                   
                </div>
            </div>
            <!-- Recent Sales End -->

            <!-- Footer Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="bg-light rounded-top p-4">
                    <div class="row">
                        <div class="col-12 col-sm-6 text-center text-sm-start">
                            &copy; <a href="#">AQUApets.in</a>, All Right Reserved. 
                        </div>
                        
                    </div>
                </div>
            </div>
            <!-- Footer End -->
        </div>
        <!-- Content End -->

        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
            
            //sales chart
            var ctx3 = $("#monthly-sales").get(0).getContext("2d");
            var myChart3 = new Chart(ctx3, {
                type: "bar",
                data: {
                    labels: [<%- filledMonthlySales.map(entry => `"${monthNames[entry._id - 1]}"`) %>],
                    datasets: [{
                        label: "Sales",
                        data: [<%- filledMonthlySales.map(entry => entry.count) %>],
                        backgroundColor: "rgba(0, 156, 255, .7)",
                    }],
                },
                options: {
                    responsive: true
                }
            });

            //revenue chart
            var ctx4 = $("#monthly-revenue").get(0).getContext("2d");
            var myChart4 = new Chart(ctx4, {
                type: "line",
                data: {
                    labels: [<%- filledMonthlyRevenue.map(entry => `"${monthNames[entry._id - 1]}"`) %>],
                    datasets: [{
                        label: "Revenue",
                        data: [<%- filledMonthlyRevenue.map(entry => entry.total) %>],
                        backgroundColor: "rgba(0, 156, 255, .5)",
                        fill: true,
                    }],
                },
                options: {
                    responsive: true
                }
            });
        </script>
    <%- include('../layouts/admin_footer.ejs') %>